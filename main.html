<html>
<head>
<script>


// Spectrum code by Bill Gibbons, http://scoundrelspoint.com/spectrum/index.html
var c = 3.0e17;	 // speed of light in nm/s
var min_wavelen = 380;
var max_wavelen = 700;
min_freq = c / max_wavelen;
max_freq = c / min_wavelen;


function WavelengthToRGB(w, no_falloff) {
	if (w < min_wavelen || w > max_wavelen)
		return [ 0, 0, 0 ];

	var gamma = 0.80;
	var rgb;
	if (w >= min_wavelen && w <= 440)			rgb = [	-(w-440)/(440-min_wavelen), 0, 1 ];
	else if (w >= 440 && w <= 490) rgb = [ 0, (w-440)/(490-440), 1 ];
	else if (w >= 490 && w <= 510) rgb = [ 0, 1, -(w-510)/(510-490) ];
	else if (w >= 510 && w <= 580) rgb = [ (w-510)/(580-510), 1, 0 ];
	else if (w >= 580 && w <= 645) rgb = [ 1, -(w-645)/(645-580), 0 ];
	else if (w >= 645 && w <= max_wavelen) rgb = [ 1, 0, 0 ];

	// Let the intensity fall off near the vision limits
	var s;
	if (no_falloff)	 s = 1;
	else if (w < min_wavelen+40) s = 0.3 + 0.7 * (w-min_wavelen)/40;
	else if (w > max_wavelen-40) s = 0.3 + 0.7 * (max_wavelen-w)/40;
	else							s = 1;

	// Gamma adjust.
	return [ Math.round(Math.pow(rgb[0]*s, gamma) * 256),
					 Math.round(Math.pow(rgb[1]*s, gamma) * 256),
					 Math.round(Math.pow(rgb[2]*s, gamma) * 256) ];
}

function SpectrumToRGBMix(x, wmult, fmult, no_falloff) {
	if (x < 0 || x > 1)
		return [ 0, 0, 0 ];
	var w1 = min_wavelen + (max_wavelen-min_wavelen)*x;
	var f = min_freq + (max_freq-min_freq)*(1-x);
	var w2 = c / f;
	return WavelengthToRGB(w1*wmult + w2*fmult, no_falloff);
}

function SpectrumToRGBByWavelength(x) {
	return SpectrumToRGBMix(x, 1.0, 0.0, false);
}





track_len = 51
init_pos = 25
tape = '000000000000000000000000000000000000000000000000000'
runlength = 107 // in 

Delta = {
	A0: [1, 'r', 'B'],
	A1: [1, 'l', 'B'],
	B0: [1, 'l', 'A'],
	B1: [0, 'l', 'C'],
	C0: [1, 'r', 'H'],
	C1: [1, 'l', 'D'],
	D0: [1, 'r', 'D'],
	D1: [0, 'r', 'A']
}

Machine = { // By convention, halting state = 'H'. You can change this if you really want to.
	alphabet: ['0', '1'],
	states: ['A', 'B', 'C', 'D'], // Not counting halting state.
	init_state: 'A',
	halt_state: 'H',
	delta: Delta,
	blank: '0'
}

function draw() {
	canvas = document.getElementById('canvas');
	ctx = canvas.getContext('2d');
	canvas.height = 4*runlength;
	canvas.width = 4*track_len;
}

</script>
</head>
<body onload="draw()">
<canvas id="canvas" width="1" height="1" style="padding:5px" />
</body>
</html>